workflows:
  implement_ticket:
    description: "Given a ticket or file, produce understanding, impact, plan, diffs, tests, and a ticket-ready summary."
    input:
      kind: ticket
      allow_file: true
    steps:
      - name: understand_ticket
        profile: onboarding
        prompt: ticket_understander
        uses_issue_mcp: true
      - name: discover_impact
        profile: code-surgeon
        prompt: impact_analyzer
      - name: plan_implementation
        profile: pair-programmer
        prompt: implementation_planner
      - name: draft_changes
        profile: code-surgeon
        prompt: code_diff_generator
      - name: tests_and_validation
        profile: testing-guru
        prompt: test_author
      - name: summarize_for_ticket
        profile: pair-programmer
        prompt: ticket_comment_summarizer
        uses_issue_mcp: true

  refactor_scout:
    description: "Inspect a file for refactoring opportunities and draft an issue/ticket summary."
    input:
      kind: text
      allow_file: true
    steps:
      - name: analyze_refactor
        profile: code-surgeon
        prompt: refactor_analyzer
      - name: plan_refactor
        profile: pair-programmer
        prompt: refactor_plan
      - name: draft_ticket
        profile: documentation-writer
        prompt: refactor_ticket_writer
